# 移动端布局方案解析与对比

最近实习，用vue做移动端的东西，本来页面样式是写好了的，我负责用vue写页面的逻辑，不过本着学习的态度，写完逻辑后花了一个下午研究了下移动端的布局适配，网上看了很多文章的不同的方案，通用流行的方案分为两种：一种是动态viewport+rem，一种是固定viewport+rem，现总结消化下。

## 1. 屏幕基本概念

在这之前，先得了解下有关retina屏幕的概念，不过在了解为什么会出现retina屏幕之前，需要了解几个有关屏幕设备的知识

**设备像素/物理像素：** 物理设备能控制显示的最小单位，简单点，可以把显示屏理解为一个个灯泡排列的矩阵，其中的一个灯泡就是一个物理像素点，每个灯泡可以显示255\*255\*255种颜色，也就是rgb

**设备独立像素（Device-independent pixel）： **可以认为是计算机坐标系统中的一个点，这个点代表一个可以由程序使用并控制的虚拟像素，然后由相关系统转换为物理像素。在web开发里面，设备独立像素就是CSS像素，不过在不同的系统中，物理像素到设备独立像素之间有一定的转化关系

可以这样理解，物理像素是硬件上的概念，实实在在存在的小灯泡，设备独立像素是软件程序控制上的概念，它是一个虚拟的像素，在CSS里面，就是px

而硬件和软件之间的转化，就引入了一个新的名词：**设备像素比**

> 设备像素比（devicePixelRatio） = 物理像素 / 设备独立像素

对于PC端的显示屏，一个物理像素对应一个设备独立像素，所以设备的设备像素比`dpr`为1，也就是说一块`1920*960`分辨率的屏幕，宽度上排列着1920个物理的像素点（小灯泡），高度上排列着960个像素点（小灯泡），`dpr`为1，所以对应的设备独立像素也是`1920*960`，换句话说，在软件`css`上可以控制的css虚拟像素也是`1920px*960px`

> 对于dpr为1的设备，程序上用CSS点亮`20px*20px`的div，硬件上就点亮了`20*20`的灯泡矩阵。

后来移动设备发展迅速，为了显示效果更加高清和没有颗粒感，屏幕的物理像素点更密集，苹果率先推出了retina屏幕的概念，在这里不对retina屏幕做深入研究，因为真正的retina屏幕是需要硬件、系统、以及软件应用共同配合的，但是对于前端来说，姑且可以这么理解，dpr大于1的屏幕就是retina屏幕。

那么，对于`dpr`为2的屏幕，以`iphone5`为例子，其屏幕分辨率为`640*1136`，表示宽有640个物理像素点，高有1136物理像素点，除以`dpr`为2，设备独立像素则是`320*568`，同样的，在程序上css能控制的虚拟像素就为`320px*568px`

也就是说，dpr为2，以前用一个物理像素来显示的点，现在用4个物理像素来显示，用一张图来说明(来自网络)

![mark](http://ogzrgstml.bkt.clouddn.com/blog/20170603/225119106.png)

上图中可以看出，对于这样的css样式：

```css
width: 2px;
height: 2px;
```

在普通屏幕下，1个css像素 对应 1个物理像素(`1:1`)，在retina 屏幕下，1个css像素对应 4个物理像素(`1:4`)。

在JS中可以通过`window.devicePixelRatio`获取设备像素比的值

在css中，可以通过`-webkit-device-pixel-ratio`，`-webkit-min-device-pixel-ratio`和 `-webkit-max-device-pixel-ratio`进行媒体查询，对不同dpr的设备，做一些样式适配(这里只针对webkit内核的浏览器和webview)。

## 2. 移动端适配问题

在不同大小和设备像素比的屏幕下：

* 保证布局一致性：页面布局随着屏幕大小变化而弹性变化
* 保证字体大小一致性
* 保证图片清晰度，不同大小的屏幕都能看到高清图片
* 保证1px边框是真正的1px

### 2.1 布局方案





### 2.1 字体单位：用rem还是px

